<!DOCTYPE html>
<!-- saved from url=(0049)https://stripe.com/docs/connect/charges-transfers -->
<html lang="en" data-ember-extension="1"><script type="text/javascript" async="" src="./Creating Separate Charges and Transfers_files/mixpanel-2.2.min.js"></script><script async="" src="./Creating Separate Charges and Transfers_files/analytics.js"></script><script async="" src="./Creating Separate Charges and Transfers_files/gtm.js"></script><script src="./Creating Separate Charges and Transfers_files/742650679237989" async=""></script><script async="" src="./Creating Separate Charges and Transfers_files/fbevents.js"></script><script type="text/javascript">window["_gaUserPrefs"] = { ioo : function() { return true; } }</script><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    
    <meta name="google-site-verification" content="f0LCrdI6z4Fo8zld4sHCgo5SiUE4EYYRUa6KVeX3Mw8">
    <meta name="csrf-token" content="ACmByp9VS-5dgI-ZXH4IDjQKupcbFRMLHUfMREA8ebLWGyvN9zdYqelEZg-tdQCE2ww411MvMRPNy_WDfbOyUg==">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Creating Separate Charges and Transfers</title>

    <meta name="description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">


    <link rel="shortcut icon" href="https://stripe.com/favicon.ico">

    <link rel="apple-touch-icon-precomposed" href="https://stripe.com/img/apple-touch-icon/180x180.png">
    <link rel="icon" href="https://stripe.com/img/apple-touch-icon/180x180.png">


    <link rel="image_src" type="image/png" href="https://stripe.com/img/v3/home/social.png">


        <link rel="canonical" href="https://stripe.com/docs/connect/authentication">

    <meta property="og:title" content="Authentication with Connect">
    <meta property="og:url" content="https://stripe.com/docs/connect/authentication">
    <meta property="og:description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">
    <meta property="og:image" content="https://stripe.com/img/v3/home/social.png">

      <meta name="twitter:card" content="summary">
      <meta name="twitter:image" content="https://stripe.com/img/v3/home/twitter.png">
    <meta name="twitter:site" content="@stripe">
    <meta name="twitter:title" content="Authentication with Connect">
    <meta name="twitter:description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">


    <script type="application/json" id="strut_files">{&quot;v3/shared/navigation_ie10.css&quot;:&quot;/assets/v3/shared/navigation_ie10-fad8432db8a0ef02ccfc88df4a0b8535.css&quot;}</script>

    

    

    <link rel="stylesheet" href="./Creating Separate Charges and Transfers_files/default-6388c486f7388db1252f0d7c85db5e15.css">
    <link rel="stylesheet" href="./Creating Separate Charges and Transfers_files/common-966a7c7414d89c40541b15f2adfa6a26.css">
    <link rel="stylesheet" href="./Creating Separate Charges and Transfers_files/base-3cdaeb306a5f322afd95a5e0122a3388.css">
    <link rel="stylesheet" href="./Creating Separate Charges and Transfers_files/prism_light-6e629a34ce1570d4f33f7e2ee8bebbc2.css">
    
    
    <meta name="viewport" content="width=1060">
    <meta name="robots" content="noarchive">
  </head>
  <body class="">
    
    <div id="docs">
      <div id="sidebar" class="bordered">
        <div class="logo">
          <a class="site" href="https://stripe.com/" title="Stripe"></a>
          <a class="extension" href="https://stripe.com/docs">docs</a>
        </div>
        <div class="nav-border"></div>
        <nav>
          <h1 class="home"><a href="https://stripe.com/docs">Home</a></h1>
          <h1 class="payments"><a class="toggle-content" data-trigger-id="0">Payments</a></h1>
<ul class="hidden" data-hidden="true" data-height="889" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/quickstart">Quickstart</a>
    </li>
    <li class="category">Collecting payment details
    </li>
    <li>
      <a href="https://stripe.com/docs/checkout/tutorial" data-trigger-id="9">Checkout</a>
      <ul class="hidden" data-hidden="true" data-height="28" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/checkout">Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/stripe-js" data-trigger-id="10">Stripe.js &amp; Elements</a>
      <ul class="hidden" data-hidden="true" data-height="112" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/stripe-js/elements/quickstart">Quickstart</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/stripe-js/elements/payment-request-button">Payment Request Button</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/stripe-js/elements/migrating">Migration</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/stripe-js/reference">Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/mobile/ios" data-trigger-id="11">iOS</a>
      <ul class="hidden" data-hidden="true" data-height="112" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/mobile/ios/standard">Standard Integration</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/mobile/ios/custom">Custom Integration</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/apple-pay/apps">Apple Pay in Apps</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/mobile/ios/sources">Using Sources</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/mobile/android" data-trigger-id="12">Android</a>
      <ul class="hidden" data-hidden="true" data-height="168" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/mobile/android/standard">Standard Integration</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/mobile/android/pay-with-google">Pay with Google</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/mobile/android/alipay-android">Working with Alipay</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/mobile/android/android-pay">Android Pay</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/mobile/android/customer-information">Customer Information</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/mobile/android/sources">Using Sources</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/saving-cards">Saving Cards</a>
    </li>
    <li class="category">Charges
    </li>
    <li>
      <a href="https://stripe.com/docs/charges">Creating Charges</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/declines" data-trigger-id="13">Declines &amp; Failed Payments</a>
      <ul class="hidden" data-hidden="true" data-height="28" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/declines/codes">Decline Codes</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/disputes" data-trigger-id="14">Disputes &amp; Fraud</a>
      <ul class="hidden" data-hidden="true" data-height="56" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/disputes/categories">Dispute Categories</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/disputes/prevention">Prevention</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/refunds">Refunds</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/payouts">Receiving Payouts</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/currencies" data-trigger-id="15">Supported Currencies</a>
      <ul class="hidden" data-hidden="true" data-height="28" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/currencies/conversions">Currency Conversions</a>
    </li>
</ul>

    </li>
    <li class="category">Sources
    </li>
    <li>
      <a href="https://stripe.com/docs/sources" data-trigger-id="16">Payment Methods</a>
      <ul class="hidden" data-hidden="true" data-height="308" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/sources/cards">Cards</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/three-d-secure">3D Secure</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/alipay">Alipay</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/ach-credit-transfer">ACH Credit Transfer</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/bancontact">Bancontact</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/bitcoin">Bitcoin</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/giropay">Giropay</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/ideal">iDEAL</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/p24">P24</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/sepa-debit">SEPA Direct Debit</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/sofort">SOFORT</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/sources/best-practices">Best Practices</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/customers">Sources &amp; Customers</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/connect">Connect Platforms</a>
    </li>
    <li class="category">Other Payment Methods
    </li>
    <li>
      <a href="https://stripe.com/docs/ach">ACH</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/amex-express-checkout">Amex Express Checkout</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/apple-pay">Apple Pay</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/pay-with-google">Pay with Google</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/payment-request-api">Payment Request API</a>
    </li>
    <li class="category">Products &amp; Orders
    </li>
    <li>
      <a href="https://stripe.com/docs/orders" data-trigger-id="17">Orders</a>
      <ul class="hidden" data-hidden="true" data-height="28" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/orders/guide">Guide</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/orders/tax-integration">Tax Integrations</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/orders/shipping-integration">Shipping Integrations</a>
    </li>
    <li class="separator">
      <a href="https://stripe.com/docs/testing">Testing</a>
    </li>
</ul>

          <h1 class="subscriptions"><a class="toggle-content" data-trigger-id="1">Subscriptions</a></h1>
<ul class="hidden" data-hidden="true" data-height="528" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/subscriptions/quickstart">Quickstart</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/creating" data-trigger-id="18">Creating Subscriptions</a>
      <ul data-collapsable="false" data-height="168">
    <li>
      <a href="https://stripe.com/docs/subscriptions/multiplan">Using Multiple Plans</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/discounts">Applying Discounts</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/trials">Using Trial Periods</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/quantities">Setting Quantities</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/taxes">Adding Taxes</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/multiple">Multiple Subscriptions</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/lifecycle">Lifecycle &amp; Events</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/webhooks">Using Webhooks</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/changing" data-trigger-id="19">Changing Subscriptions</a>
      <ul data-collapsable="false" data-height="84">
    <li>
      <a href="https://stripe.com/docs/subscriptions/upgrading-downgrading">Upgrading &amp; Downgrading</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/billing-cycle">Billing Cycle</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/canceling-pausing">Canceling &amp; Pausing</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/invoices" data-trigger-id="20">Working with Invoices</a>
      <ul data-collapsable="false" data-height="28">
    <li>
      <a href="https://stripe.com/docs/subscriptions/ach-credit">ACH Credit Transfers</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/plans">Managing Plans</a>
    </li>
    <li class="separator">
      <a href="https://stripe.com/docs/subscriptions/testing">Testing</a>
    </li>
</ul>

          <h1 class="connect"><a class="toggle-content" data-trigger-id="2">Connect</a></h1>
<ul class="" data-height="566" style="opacity: 1; height: 670px;">
    <li>
      <a href="https://stripe.com/docs/connect">Overview</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/quickstart">Quickstart</a>
    </li>
    <li class="category">Account Types
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/accounts">Accounts Overview</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/standard-accounts">Standard</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/express-accounts">Express</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/custom-accounts" data-trigger-id="21">Custom</a>
      <ul class="hidden" data-hidden="true" data-height="84" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/connect/updating-accounts">Updating Accounts</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/identity-verification">Identity Verification</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/required-verification-information">Required Info</a>
    </li>
</ul>

    </li>
    <li class="category">Processing Payments
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/charges" data-trigger-id="22" class="">Creating Charges</a>
      <ul class="" data-height="104" style="opacity: 1; height: 104px;">
    <li>
      <a href="https://stripe.com/docs/connect/direct-charges" class="">Direct Charges</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/destination-charges" class="">Destination Charges</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/charges-transfers" class="selected">Separate Charges and Transfers</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/connect/account-debits" class="">Account Debits</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/subscriptions" class="">Using Subscriptions</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/currencies">Multiple Currencies</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/account-balances">Account Balances</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/payouts">Bank Payouts</a>
    </li>
    <li class="separator">
      <a href="https://stripe.com/docs/connect/best-practices" class="">Best Practices</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/migrating" class="">Migrating</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/reference" class="">OAuth Reference</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/webhooks" class="">Webhooks</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/testing">Testing</a>
    </li>
</ul>

          <h1 class="sigma"><a class="toggle-content" data-trigger-id="3">Sigma</a></h1>
<ul class="hidden" data-hidden="true" data-height="150" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/sigma">Overview</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sigma/transactions">Transactions</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sigma/subscriptions">Subscriptions</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sigma/connect">Connect</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sigma/scheduled-queries">Scheduled Queries</a>
    </li>
</ul>

          <h1 class="radar"><a class="toggle-content" data-trigger-id="4">Radar</a></h1>
<ul class="hidden" data-hidden="true" data-height="248" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/radar">Overview</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/radar/risk-evaluation">Risk Evaluation</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/radar/blocklist">Blocklist</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/radar/review" data-trigger-id="23">Review</a>
      <ul data-collapsable="false" data-height="28">
    <li>
      <a href="https://stripe.com/docs/radar/review/auth-and-capture">Uncaptured Payments</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/radar/rules" data-trigger-id="24">Rules</a>
      <ul data-collapsable="false" data-height="28">
    <li>
      <a href="https://stripe.com/docs/radar/rules/reference">Reference</a>
    </li>
</ul>

    </li>
    <li class="separator">
      <a href="https://stripe.com/docs/radar/testing">Testing</a>
    </li>
</ul>

          <h1 class="relay"><a class="toggle-content" data-trigger-id="5">Relay</a></h1>
<ul class="hidden" data-hidden="true" data-height="94" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/relay">Selling in Other Apps</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/relay/apps-guide" data-trigger-id="25">Accepting Orders in Your App</a>
      <ul data-collapsable="false" data-height="28">
    <li>
      <a href="https://stripe.com/docs/relay/apps-error-guide">Error Handling</a>
    </li>
</ul>

    </li>
</ul>

          <h1 class="account"><a class="toggle-content" data-trigger-id="6">Account</a></h1>
<ul class="hidden" data-hidden="true" data-height="150" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/dashboard">Your Account</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/dashboard/receipts">Email Receipts</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/checklist">Going Live Checklist</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/reporting">Reporting</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/dashboard/search">Search</a>
    </li>
</ul>

          <h1 class="api"><a class="toggle-content" data-trigger-id="7">Development</a></h1>
<ul class="hidden" data-hidden="true" data-height="206" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/libraries">API Libraries</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/upgrades">API Upgrades</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/webhooks">Webhooks</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/building-integrations">Building Integrations</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/building-plugins">Building Plugins &amp; Libraries</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/recipes">Recipes</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/security">Security</a>
    </li>
</ul>

          <h1 class="atlas"><a class="toggle-content" data-trigger-id="8">Atlas</a></h1>
<ul class="hidden" data-hidden="true" data-height="122" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/atlas">Overview</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/atlas/application">Application</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/atlas/account-progress">Account Progress</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/atlas/next">What's Next</a>
    </li>
</ul>

          <h1 class="references"><a href="https://stripe.com/docs/api" class="external" target="_blank">API Reference</a></h1>
        </nav>
      </div>
      <div id="content-wrapper" tabindex="0">
        <div class="overlay"></div>
          <div class="search-results">
            <ul class="results"></ul>
          </div>
          <form class="search">
            <input type="search" placeholder="Search documentation...">
            <div class="search-after">
              <span class="search-text"></span>
              <span class="search-after-text--no-results">— No Results</span>
            </div>
          </form>
        <header id="main-header">
          <nav>
            <ul class="external">
              <li><a href="https://support.stripe.com/">Support</a></li>

              <li class="button">
                <a data-adroll-segment="submit_two" href="https://dashboard.stripe.com/login">Sign in</a>
              </li>
            </ul>
          </nav>
        </header>
        <article id="content"><header>
  <h1>Creating Separate Charges and Transfers <span class="tag beta">Preview</span></h1>
  <p>With <a href="https://stripe.com/connect">Connect</a>, you can make charges on your platform account on behalf of connected accounts, perform transfers separately, and even retain funds in the process.</p>
</header>

<section>
  <aside class="note">
	<h3 id="learn-more-about-connect">Learn more about Connect<a class="anchor" href="https://stripe.com/docs/connect/charges-transfers#learn-more-about-connect"></a></h3>
	<p>Don't know much about Connect yet? Check out the <a href="https://stripe.com/docs/connect">overview</a>.</p>
</aside>


<p>Connect supports <a href="https://stripe.com/docs/connect/charges#choosing-approach">three approaches</a> for processing charges on behalf of a connected account. For <a href="https://stripe.com/docs/connect/express-accounts">Express</a> and <a href="https://stripe.com/docs/connect/custom-accounts">Custom</a> accounts, the <a href="https://stripe.com/docs/connect/destination-charges">simplest route</a> is to create the charge on your platform’s account and use the <code>destination</code> parameter to indicate the connected account that receives the funds.</p>

<p>For platforms that desire more flexibility in how funds move, a more manual option is to create the charge on your platform account and separately transfer funds to the connected account. Using this approach, the platform is responsible for the cost of the Stripe fees, refunds, and chargebacks by default.</p>

<aside class="important alternate amber">
  <p><strong>This approach is only fully supported when both your platform and the connected account are in the U.S. or Europe. If your platform or the connected account is outside the U.S. or Europe, you can only use this approach for less than 10% of your total volume.</strong></p>
</aside>

<p>Because of the additional programming and operations required, this approach is best left to business models with any of these qualities:</p>

<ul>
  <li>A one-to-many correlation between charges and transfers (e.g., a charge made to a delivery service needs to be split between the business—the source of the items being delivered—and the delivery person)</li>
  <li>A one-to-many correlation between transfers and charges (e.g., a carpool trip on a ride-sharing service)</li>
  <li>At the time the charge is made, it is not known which connected account should receive the funds (e.g., a cleaning service may process the charge immediately but not know which connected account to pay—who is actually doing the work—until later)</li>
  <li>A transfer may need to be made before the actual charge is made (e.g., an ad network needs to purchase ad space before users pay for ads)</li>
  <li>A transfer may be for more than the associated charge (e.g., a platform may discount a charge for the customer but still pay the connected account the full amount)</li>
</ul>

<p>As the range of possibilities demonstrate, creating separate charges and transfers provides the most flexibility for a platform.</p></section>

<section>
  <h2 id="grouping-transactions">Grouping transactions<a class="anchor" href="https://stripe.com/docs/connect/charges-transfers#grouping-transactions"></a></h2>
  <aside class="note">
    <h3 id="transfers-without-charges">Transfers without charges<a class="anchor" href="https://stripe.com/docs/connect/charges-transfers#transfers-without-charges"></a></h3>
    <p>To credit a connected account without an associated charge (e.g., when a customer pays nothing but you still need to pay a provider), simply make a <a href="https://stripe.com/docs/api#create_transfer">transfer</a> without a transfer group.</p>
  </aside>

<p>Because this manual approach creates no direct link between the charge and the subsequent transfer, you must assign a <code>transfer_group</code> to the related charges and transfers when making the requests. This can be any unique value, such as a sale ID. The only restriction is the <code>transfer_group</code> must represent a single business action.</p>
  <div class="tabs tabs-code animated" data-platform="server">
    <nav class="nav-languages">
        <a data-language="curl" class="selected">curl</a>
        <a data-language="ruby">Ruby</a>
        <a data-language="python">Python</a>
        <a data-language="php">PHP</a>
        <a data-language="java">Java</a>
        <a data-language="node">Node</a>
        <a data-language="go">Go</a>
    </nav>
    <div class="tabs-content">
      <div class="code selected" data-language="curl">
  <pre class=" numbered selected language-curl"><code class=" language-curl"># Create a Charge:
<span class="token curl">curl</span> <span class="token url">https://api.stripe.com/v1/charges</span> \
<span class="token option">   -u</span> <span class="token value secret-key" style="pointer-events: none;">sk_test_BQokikJOvBiI2HlWgH4olfQ2</span>: \
<span class="token option">   -d</span> <span class="token parameter">amount</span>=<span class="token value">10000</span> \
<span class="token option">   -d</span> <span class="token parameter">currency</span>=<span class="token value">usd</span> \
<span class="token option">   -d</span> <span class="token parameter">source</span>=<span class="token value">tok_visa</span> \
<span class="token option">   -d</span> <span class="token parameter">transfer_group</span>=<span class="token value"></span><span class="token value">"{ORDER10}"</span>
# Create a Transfer to a connected account (later):
<span class="token curl">curl</span> <span class="token url">https://api.stripe.com/v1/transfers</span> \
<span class="token option">   -u</span> <span class="token value secret-key" style="pointer-events: none;">sk_test_BQokikJOvBiI2HlWgH4olfQ2</span>: \
<span class="token option">   -d</span> <span class="token parameter">amount</span>=<span class="token value">7000</span> \
<span class="token option">   -d</span> <span class="token parameter">currency</span>=<span class="token value">usd</span> \
<span class="token option">   -d</span> <span class="token parameter">destination</span>=<span class="token value"></span><span class="token value">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span> \
<span class="token option">   -d</span> <span class="token parameter">transfer_group</span>=<span class="token value"></span><span class="token value">"{ORDER10}"</span>
# Create a second Transfer to another connected account (later):
<span class="token curl">curl</span> <span class="token url">https://api.stripe.com/v1/transfers</span> \
<span class="token option">   -u</span> <span class="token value secret-key" style="pointer-events: none;">sk_test_BQokikJOvBiI2HlWgH4olfQ2</span>: \
<span class="token option">   -d</span> <span class="token parameter">amount</span>=<span class="token value">2000</span> \
<span class="token option">   -d</span> <span class="token parameter">currency</span>=<span class="token value">usd</span> \
<span class="token option">   -d</span> <span class="token parameter">destination</span>=<span class="token value"></span><span class="token value">"{OTHER_CONNECTED_STRIPE_ACCOUNT_ID}"</span> \
<span class="token option">   -d</span> <span class="token parameter">transfer_group</span>=<span class="token value"></span><span class="token value">"{ORDER10}"</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="ruby">
  <pre class=" numbered language-ruby"><code class=" language-ruby"><span class="token comment" spellcheck="true"># Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true"># See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">Stripe</span><span class="token punctuation">.</span><span class="token function">api_key</span> <span class="token operator">=</span> <span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

<span class="token comment" spellcheck="true"># Create a Charge:</span>
charge <span class="token operator">=</span> <span class="token constant">Stripe</span><span class="token punctuation">:</span><span class="token symbol">:Charge</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token symbol">:amount</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token symbol">:currency</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token symbol">:source</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"tok_visa"</span><span class="token punctuation">,</span>
  <span class="token symbol">:transfer_group</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{ORDER10}"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Create a Transfer to a connected account (later):</span>
transfer <span class="token operator">=</span> <span class="token constant">Stripe</span><span class="token punctuation">:</span><span class="token symbol">:Transfer</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token symbol">:amount</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">7000</span><span class="token punctuation">,</span>
  <span class="token symbol">:currency</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token symbol">:destination</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">,</span>
  <span class="token symbol">:transfer_group</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{ORDER10}"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Create a second Transfer to another connected account (later):</span>
transfer <span class="token operator">=</span> <span class="token constant">Stripe</span><span class="token punctuation">:</span><span class="token symbol">:Transfer</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token symbol">:amount</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">2000</span><span class="token punctuation">,</span>
  <span class="token symbol">:currency</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token symbol">:destination</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{OTHER_CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">,</span>
  <span class="token symbol">:transfer_group</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{ORDER10}"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="python">
  <pre class=" numbered language-python"><code class=" language-python"><span class="token comment" spellcheck="true"># Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true"># See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">stripe.api_key</span> <span class="token operator">=</span> <span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

<span class="token comment" spellcheck="true"># Create a Charge:</span>
charge <span class="token operator">=</span> <span class="token constant">stripe.Charge.</span><span class="token function">create</span><span class="token punctuation">(</span>
  <span class="token parameter">amount</span><span class="token operator">=</span><span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token parameter">currency</span><span class="token operator">=</span><span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token parameter">source</span><span class="token operator">=</span><span class="token string">"tok_visa"</span><span class="token punctuation">,</span>
  transfer_group<span class="token operator">=</span><span class="token string">"{ORDER10}"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Create a Transfer to a connected account (later):</span>
transfer <span class="token operator">=</span> <span class="token constant">stripe.Transfer.</span><span class="token function">create</span><span class="token punctuation">(</span>
  <span class="token parameter">amount</span><span class="token operator">=</span><span class="token number">7000</span><span class="token punctuation">,</span>
  <span class="token parameter">currency</span><span class="token operator">=</span><span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token parameter">destination</span><span class="token operator">=</span><span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">,</span>
  transfer_group<span class="token operator">=</span><span class="token string">"{ORDER10}"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Create a second Transfer to another connected account (later):</span>
transfer <span class="token operator">=</span> <span class="token constant">stripe.Transfer.</span><span class="token function">create</span><span class="token punctuation">(</span>
  <span class="token parameter">amount</span><span class="token operator">=</span><span class="token number">2000</span><span class="token punctuation">,</span>
  <span class="token parameter">currency</span><span class="token operator">=</span><span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token parameter">destination</span><span class="token operator">=</span><span class="token string">"{OTHER_CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">,</span>
  transfer_group<span class="token operator">=</span><span class="token string">"{ORDER10}"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="php">
  <pre class=" numbered language-php"><code class=" language-php"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token namespace">\Stripe</span><span class="token namespace">\Stripe</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">setApiKey</span><span class="token punctuation">(</span><span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// Create a Charge:</span>
<span class="token variable">$charge</span> <span class="token operator">=</span> <span class="token namespace">\Stripe</span><span class="token namespace">\Charge</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span>
  <span class="token string">"amount"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token string">"currency"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token string">"source"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"tok_visa"</span><span class="token punctuation">,</span>
  <span class="token string">"transfer_group"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{ORDER10}"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// Create a Transfer to a connected account (later):</span>
<span class="token variable">$transfer</span> <span class="token operator">=</span> <span class="token namespace">\Stripe</span><span class="token namespace">\Transfer</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span>
  <span class="token string">"amount"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">7000</span><span class="token punctuation">,</span>
  <span class="token string">"currency"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token string">"destination"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">,</span>
  <span class="token string">"transfer_group"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{ORDER10}"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// Create a second Transfer to another connected account (later):</span>
<span class="token variable">$transfer</span> <span class="token operator">=</span> <span class="token namespace">\Stripe</span><span class="token namespace">\Transfer</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span>
  <span class="token string">"amount"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">2000</span><span class="token punctuation">,</span>
  <span class="token string">"currency"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token string">"destination"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{OTHER_CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">,</span>
  <span class="token string">"transfer_group"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{ORDER10}"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="java">
  <pre class=" numbered language-java"><code class=" language-java"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">Stripe</span><span class="token punctuation">.</span>apiKey <span class="token operator">=</span> <span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// Create a Charge:</span>
<span class="token constant">Map&lt;String, Object&gt;</span> chargeParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constant">HashMap&lt;String, Object&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
chargeParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"amount"</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
chargeParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"currency"</span><span class="token punctuation">,</span> <span class="token string">"usd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
chargeParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"source"</span><span class="token punctuation">,</span> <span class="token string">"tok_visa"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
chargeParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"transfer_group"</span><span class="token punctuation">,</span> <span class="token string">"{ORDER10}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">Charge</span> charge <span class="token operator">=</span> <span class="token constant">Charge</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>chargeParams<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// Create a Transfer to a connected account (later):</span>
<span class="token constant">Map&lt;String, Object&gt;</span> transferParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constant">HashMap&lt;String, Object&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
transferParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"amount"</span><span class="token punctuation">,</span> <span class="token number">7000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
transferParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"currency"</span><span class="token punctuation">,</span> <span class="token string">"usd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
transferParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"destination"</span><span class="token punctuation">,</span> <span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
transferParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"transfer_group"</span><span class="token punctuation">,</span> <span class="token string">"{ORDER10}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">Transfer</span> transfer <span class="token operator">=</span> <span class="token constant">Transfer</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>transferParams<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// Create a second Transfer to another connected account (later):</span>
<span class="token constant">Map&lt;String, Object&gt;</span> secondTransferParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constant">HashMap&lt;String, Object&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
secondTransferParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"amount"</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
secondTransferParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"currency"</span><span class="token punctuation">,</span> <span class="token string">"usd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
secondTransferParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"destination"</span><span class="token punctuation">,</span> <span class="token string">"{OTHER_CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
secondTransferParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"transfer_group"</span><span class="token punctuation">,</span> <span class="token string">"{ORDER10}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">Transfer</span> secondTransfer <span class="token operator">=</span> <span class="token constant">Transfer</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>secondTransferParams<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="node">
  <pre class=" numbered language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token keyword">var</span> stripe <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"stripe"</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// Create a Charge:</span>
stripe<span class="token punctuation">.</span><span class="token property">charges</span><span class="token punctuation">.</span><span class="token property"></span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token symbol">amount<span class="token punctuation">:</span></span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token symbol">currency<span class="token punctuation">:</span></span> <span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token symbol">source<span class="token punctuation">:</span></span> <span class="token string">"tok_visa"</span><span class="token punctuation">,</span>
  <span class="token symbol">transfer_group<span class="token punctuation">:</span></span> <span class="token string">"{ORDER10}"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property"></span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>charge<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// asynchronously called</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// Create a Transfer to the connected account (later):</span>
stripe<span class="token punctuation">.</span><span class="token property">transfers</span><span class="token punctuation">.</span><span class="token property"></span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token symbol">amount<span class="token punctuation">:</span></span> <span class="token number">7000</span><span class="token punctuation">,</span>
  <span class="token symbol">currency<span class="token punctuation">:</span></span> <span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token symbol">destination<span class="token punctuation">:</span></span> <span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">,</span>
  <span class="token symbol">transfer_group<span class="token punctuation">:</span></span> <span class="token string">"{ORDER10}"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property"></span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>transfer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// asynchronously called</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// Create a second Transfer to another connected account (later):</span>
stripe<span class="token punctuation">.</span><span class="token property">transfers</span><span class="token punctuation">.</span><span class="token property"></span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token symbol">amount<span class="token punctuation">:</span></span> <span class="token number">2000</span><span class="token punctuation">,</span>
  <span class="token symbol">currency<span class="token punctuation">:</span></span> <span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token symbol">destination<span class="token punctuation">:</span></span> <span class="token string">"{OTHER_CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">,</span>
  <span class="token symbol">transfer_group<span class="token punctuation">:</span></span> <span class="token string">"{ORDER10}"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property"></span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>second_transfer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// asynchronously called</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="go">
  <pre class=" numbered language-go"><code class=" language-go"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
stripe<span class="token punctuation">.</span>Key <span class="token operator">=</span> <span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

<span class="token comment" spellcheck="true">// Create a Charge:</span>
chargeParams <span class="token operator">:=</span> <span class="token constant">&amp;stripe.ChargeParams</span><span class="token punctuation">{</span>
  <span class="token symbol">Amount:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token symbol">Currency:</span> <span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token symbol">TransferGroup:</span> <span class="token string">"{ORDER10}"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
params<span class="token punctuation">.</span><span class="token function">SetSource</span><span class="token punctuation">(</span><span class="token string">"tok_visa"</span><span class="token punctuation">)</span>
charge<span class="token punctuation">,</span> err <span class="token operator">:=</span> charge<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>chargeParams<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// Create a Transfer to the connected account (later):</span>
transferParams <span class="token operator">:=</span> <span class="token constant">&amp;stripe.TransferParams</span><span class="token punctuation">{</span>
  <span class="token symbol">Amount:</span> <span class="token number">7000</span><span class="token punctuation">,</span>
  <span class="token symbol">Currency:</span> <span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token symbol">Dest:</span> <span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">,</span>
  <span class="token symbol">TransferGroup:</span> <span class="token string">"{ORDER10}"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
transfer<span class="token punctuation">,</span> err <span class="token operator">:=</span> transfer<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>transferParams<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// Create a second Transfer to another connected account (later):</span>
secondTransferParams <span class="token operator">:=</span> <span class="token constant">&amp;stripe.TransferParams</span><span class="token punctuation">{</span>
  <span class="token symbol">Amount:</span> <span class="token number">2000</span><span class="token punctuation">,</span>
  <span class="token symbol">Currency:</span> <span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token symbol">Dest:</span> <span class="token string">"{OTHER_CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">,</span>
  <span class="token symbol">TransferGroup:</span> <span class="token string">"{ORDER10}"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
secondTransfer<span class="token punctuation">,</span> err <span class="token operator">:=</span> transfer<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>secondTransferParams<span class="token punctuation">)</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>

    </div>
  </div>

  <aside class="note">
    <h3 id="elements-or-checkout">Elements or Checkout<a class="anchor" href="https://stripe.com/docs/connect/charges-transfers#elements-or-checkout"></a></h3>
    <p>We require <a href="https://stripe.com/docs/stripe-js">Elements</a> or <a href="https://stripe.com/docs/checkout">Checkout</a> for all platforms. You cannot send credit card data to Stripe directly from your server.</p>
  </aside>

<p>The example uses a <a href="https://stripe.com/docs/testing#cards">test token</a>—<strong>tok_visa</strong>—but you could tokenize a test card using <a href="https://stripe.com/docs/stripe-js">Stripe.js and Elements</a> or <a href="https://stripe.com/docs/checkout">Stripe Checkout</a> instead.</p>

<p>When using this approach, your platform:</p>

<ul>
  <li>Does not have to transfer the same amount as the original charge</li>
  <li>Can only transfer up to the platform’s <a href="https://stripe.com/docs/connect/account-balances">available account balance</a> (with an exception when using <a href="https://stripe.com/docs/connect/charges-transfers#transfer-availability">source_transaction</a>)</li>
  <li>Must be configured to use manual payouts in order to ensure that the account has a balance of funds available for transfer</li>
</ul>

<p>But you can group together multiple charges with a single transfer, multiple transfers with a single charge, or even perform transfers and charges in any order.</p>
</section>

<section>
<h2 id="collecting-fees">Collecting fees<a class="anchor" href="https://stripe.com/docs/connect/charges-transfers#collecting-fees"></a></h2>

<p>When creating charges on your platform and separately creating a transfer, the platform can earn money by allocating less of the charge amount to the destination Stripe account, as in the above code example. Assuming that represents a delivery service transaction, with a charge to the customer of $100, a transfer of $20 to the delivery person, and a transfer of $70 to the restaurant:</p>

<ol>
  <li>The charge amount less the Stripe fees is added to the platform account’s pending balance</li>
  <li>When the platform’s available balance is sufficient (at least $90), the transfers can be made, reducing the platform’s available balance by the specified amounts and increasing both connected account’s available balances by that same amount</li>
  <li>The platform retains an additional $6.80 ($100.00 - $70.00 - $20.00 - $3.20, assuming standard U.S. Stripe fees).</li>
</ol>
  <div class="image full">
    <a href="./Creating Separate Charges and Transfers_files/charges_transfers.png" class="zoomable" data-width="1082" data-height="502"><img src="./Creating Separate Charges and Transfers_files/charges_transfers.png" width="100%"></a>
  </div>

<p>If you process payments in multiple currencies, you should also read <a href="https://stripe.com/docs/connect/currencies">how that is handled</a> in Connect.</p>
</section>

<section>
  <h2 id="issuing-refunds">Refunding charges<a class="anchor" href="https://stripe.com/docs/connect/charges-transfers#issuing-refunds"></a></h2>

  <p>Charges created on your platform can be refunded using your platform's secret key. However, refunding a charge has no impact on any associated transfers. It's up to your platform to reconcile any amount owed back to your platform by reducing subsequent transfer amounts or by <a href="https://stripe.com/docs/connect/charges-transfers#reversing-transfers">reversing transfers</a> (as explained next).</p>

  <div class="tabs tabs-code animated" data-platform="server">
    <nav class="nav-languages">
        <a data-language="curl" class="selected">curl</a>
        <a data-language="ruby">Ruby</a>
        <a data-language="python">Python</a>
        <a data-language="php">PHP</a>
        <a data-language="java">Java</a>
        <a data-language="node">Node</a>
        <a data-language="go">Go</a>
    </nav>
    <div class="tabs-content">
      <div class="code selected" data-language="curl">
  <pre class=" numbered selected language-curl"><code class=" language-curl"><span class="token curl">curl</span> <span class="token url">https://api.stripe.com/v1/refunds</span> \
<span class="token option">   -u</span> <span class="token value secret-key" style="pointer-events: none;">sk_test_BQokikJOvBiI2HlWgH4olfQ2</span>: \
<span class="token option">   -d</span> <span class="token parameter">charge</span>=<span class="token value"></span><span class="token value">"{CHARGE_ID}"</span>
</code><span class="line-numbers"><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="ruby">
  <pre class=" numbered language-ruby"><code class=" language-ruby"><span class="token comment" spellcheck="true"># Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true"># See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">Stripe</span><span class="token punctuation">.</span><span class="token function">api_key</span> <span class="token operator">=</span> <span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

refund <span class="token operator">=</span> <span class="token constant">Stripe</span><span class="token punctuation">:</span><span class="token symbol">:Refund</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token symbol">:charge</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{CHARGE_ID}"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="python">
  <pre class=" numbered language-python"><code class=" language-python"><span class="token comment" spellcheck="true"># Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true"># See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">stripe.api_key</span> <span class="token operator">=</span> <span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

refund <span class="token operator">=</span> <span class="token constant">stripe.Refund.</span><span class="token function">create</span><span class="token punctuation">(</span>
  <span class="token parameter">charge</span><span class="token operator">=</span><span class="token string">"{CHARGE_ID}"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span></code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="php">
  <pre class=" numbered language-php"><code class=" language-php"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token namespace">\Stripe</span><span class="token namespace">\Stripe</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">setApiKey</span><span class="token punctuation">(</span><span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$refund</span> <span class="token operator">=</span> <span class="token namespace">\Stripe</span><span class="token namespace">\Refund</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span>
  <span class="token string">"charge"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{CHARGE_ID}"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="java">
  <pre class=" numbered language-java"><code class=" language-java"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">Stripe</span><span class="token punctuation">.</span>apiKey <span class="token operator">=</span> <span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">;</span>

<span class="token constant">Map&lt;String, Object&gt;</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constant">HashMap&lt;String, Object&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"charge"</span><span class="token punctuation">,</span> <span class="token string">"{CHARGE_ID}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">Refund</span> refund <span class="token operator">=</span> <span class="token constant">Refund</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="node">
  <pre class=" numbered language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token keyword">var</span> stripe <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"stripe"</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

stripe<span class="token punctuation">.</span><span class="token property">refunds</span><span class="token punctuation">.</span><span class="token property"></span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token symbol">charge<span class="token punctuation">:</span></span> <span class="token string">"{CHARGE_ID}"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property"></span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>refund<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// asynchronously called</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="go">
  <pre class=" numbered language-go"><code class=" language-go"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
stripe<span class="token punctuation">.</span>Key <span class="token operator">=</span> <span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

params <span class="token operator">:=</span> <span class="token constant">&amp;stripe.RefundParams</span><span class="token punctuation">{</span>
  <span class="token symbol">Charge:</span> <span class="token string">"{CHARGE_ID}"</span><span class="token punctuation">,</span>
refund<span class="token punctuation">,</span> err <span class="token operator">:=</span> refund<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>

    </div>
  </div>

</section>

<section>
<h2 id="reversing-transfers">Reversing transfers<a class="anchor" href="https://stripe.com/docs/connect/charges-transfers#reversing-transfers"></a></h2>

<p>Connect supports the ability to <a href="https://stripe.com/docs/api#create_transfer_reversal">reverse transfers</a> made to connected accounts, either entirely or partially (by setting an <code>amount</code> value):</p>
  <div class="tabs tabs-code animated" data-platform="server">
    <nav class="nav-languages">
        <a data-language="curl" class="selected">curl</a>
        <a data-language="ruby">Ruby</a>
        <a data-language="python">Python</a>
        <a data-language="php">PHP</a>
        <a data-language="java">Java</a>
        <a data-language="node">Node</a>
        <a data-language="go">Go</a>
    </nav>
    <div class="tabs-content">
      <div class="code selected" data-language="curl">
  <pre class=" numbered selected language-curl"><code class=" language-curl"><span class="token curl">curl</span> <span class="token url">https://api.stripe.com/v1/transfers/{TRANSFER_ID}/reversals</span> \
<span class="token option">   -u</span> <span class="token value">{PLATFORM_SECRET_KEY}</span>: \
<span class="token option">   -d</span> <span class="token parameter">amount</span>=<span class="token value">500</span>
</code><span class="line-numbers"><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="ruby">
  <pre class=" numbered language-ruby"><code class=" language-ruby"><span class="token comment" spellcheck="true"># Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true"># See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">Stripe</span><span class="token punctuation">.</span><span class="token function">api_key</span> <span class="token operator">=</span> <span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

transfer <span class="token operator">=</span> <span class="token constant">Stripe</span><span class="token punctuation">:</span><span class="token symbol">:Transfer</span><span class="token punctuation">.</span><span class="token function">retrieve</span><span class="token punctuation">(</span><span class="token string">"{TRANSFER_ID}"</span><span class="token punctuation">)</span>
transfer<span class="token punctuation">.</span>reversals<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token symbol">:amount</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">500</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="python">
  <pre class=" numbered language-python"><code class=" language-python"><span class="token comment" spellcheck="true"># Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true"># See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">stripe.api_key</span> <span class="token operator">=</span> <span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

transfer <span class="token operator">=</span> <span class="token constant">stripe.Transfer.</span><span class="token function">retrieve</span><span class="token punctuation">(</span><span class="token string">"{TRANSFER_ID}"</span><span class="token punctuation">)</span>
transfer<span class="token punctuation">.</span><span class="token variable">reversals</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="php">
  <pre class=" numbered language-php"><code class=" language-php"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token namespace">\Stripe</span><span class="token namespace">\Stripe</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">setApiKey</span><span class="token punctuation">(</span><span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$transfer</span> <span class="token operator">=</span> <span class="token namespace">\Stripe</span><span class="token namespace">\Transfer</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">retrieve</span><span class="token punctuation">(</span><span class="token string">"{TRANSFER_ID}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$transfer</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">reversals</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">create</span><span class="token punctuation">(</span>
  amount<span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="java">
  <pre class=" numbered language-java"><code class=" language-java"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">Stripe</span><span class="token punctuation">.</span>apiKey <span class="token operator">=</span> <span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">;</span>

<span class="token constant">Transfer</span> transfer <span class="token operator">=</span> <span class="token constant">Transfer</span><span class="token punctuation">.</span><span class="token function">retrieve</span><span class="token punctuation">(</span><span class="token string">"{TRANSFER_ID}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token constant">Map&lt;String, Object&gt;</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constant">HashMap&lt;String, Object&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"amount"</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

transfer<span class="token punctuation">.</span><span class="token function">getReversals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="node">
  <pre class=" numbered language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token keyword">var</span> stripe <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"stripe"</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

stripe<span class="token punctuation">.</span><span class="token property">transfers</span><span class="token punctuation">.</span><span class="token property"></span><span class="token function">createReversal</span><span class="token punctuation">(</span>
  <span class="token string">"{TRANSFER_ID}"</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token symbol">amount<span class="token punctuation">:</span></span> <span class="token number">500</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property"></span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>reversal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// asynchronously called</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="go">
  <pre class=" numbered language-go"><code class=" language-go"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
stripe<span class="token punctuation">.</span>Key <span class="token operator">=</span> <span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

params <span class="token operator">:=</span> <span class="token constant">&amp;stripe.ReversalParams</span><span class="token punctuation">{</span>
  <span class="token symbol">Amount:</span> <span class="token number">500</span><span class="token punctuation">,</span>
  <span class="token symbol">Transfer:</span> <span class="token string">"{TRANSFER_ID}"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
reversal<span class="token punctuation">,</span> err <span class="token operator">:=</span> reversal<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>

    </div>
  </div>

<p>Transfer reversals add the specified (or entire) amount back to the platform’s available balance, reducing the connected account’s available balance accordingly. It is only possible to reverse a transfer if the connected account’s available balance is greater than the reversal amount or has <a href="https://stripe.com/docs/connect/account-balances#understanding-connected-reserved-balances">connected reserves</a> enabled.</p></section>

<section>
<h2 id="on-behalf-of">Using on_behalf_of<a class="anchor" href="https://stripe.com/docs/connect/charges-transfers#on-behalf-of"></a></h2>

<p>When you create <em>destination charges</em> <a href="https://stripe.com/docs/connect/destination-charges">on the platform account</a>, Stripe automatically:</p>

<ul>
  <li>Settles charges in the country of the specified account, thereby minimizing declines and avoiding currency conversions</li>
  <li>Uses the fee structure for the connected account’s country</li>
  <li>If the account is in a different country than the platform, the connected account’s address and phone number shows up on the customer’s credit card statement (as opposed to the platform’s)</li>
</ul>

<p>This same functionality is not automatically provided when creating separate charges and transfers, but you can replicate it using the <code>on_behalf_of</code> attribute when creating the charge. Setting <code>on_behalf_of</code> defines the business of record for the charge and funds will be settled using that account. This is especially important for international platforms who have connected accounts in different countries.</p>
  <div class="tabs tabs-code animated" data-platform="server">
    <nav class="nav-languages">
        <a data-language="curl" class="selected">curl</a>
        <a data-language="ruby">Ruby</a>
        <a data-language="python">Python</a>
        <a data-language="php">PHP</a>
        <a data-language="java">Java</a>
        <a data-language="node">Node</a>
        <a data-language="go">Go</a>
    </nav>
    <div class="tabs-content">
      <div class="code selected" data-language="curl">
  <pre class=" numbered selected language-curl"><code class=" language-curl"><span class="token curl">curl</span> <span class="token url">https://api.stripe.com/v1/charges</span> \
<span class="token option">   -u</span> <span class="token value secret-key" style="pointer-events: none;">sk_test_BQokikJOvBiI2HlWgH4olfQ2</span>: \
<span class="token option">   -d</span> <span class="token parameter">amount</span>=<span class="token value">1000</span> \
<span class="token option">   -d</span> <span class="token parameter">currency</span>=<span class="token value">usd</span> \
<span class="token option">   -d</span> <span class="token parameter">source</span>=<span class="token value">tok_visa</span> \
<span class="token option">   -d</span> <span class="token parameter">on_behalf_of</span>=<span class="token value"></span><span class="token value">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="ruby">
  <pre class=" numbered language-ruby"><code class=" language-ruby"><span class="token comment" spellcheck="true"># Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true"># See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">Stripe</span><span class="token punctuation">.</span><span class="token function">api_key</span> <span class="token operator">=</span> <span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

charge <span class="token operator">=</span> <span class="token constant">Stripe</span><span class="token punctuation">:</span><span class="token symbol">:Charge</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token symbol">:amount</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token symbol">:currency</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token symbol">:source</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"tok_visa"</span><span class="token punctuation">,</span>
  <span class="token symbol">:on_behalf_of</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="python">
  <pre class=" numbered language-python"><code class=" language-python"><span class="token comment" spellcheck="true"># Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true"># See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">stripe.api_key</span> <span class="token operator">=</span> <span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

charge <span class="token operator">=</span> <span class="token constant">stripe.Charge.</span><span class="token function">create</span><span class="token punctuation">(</span>
  <span class="token parameter">amount</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token parameter">currency</span><span class="token operator">=</span><span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token parameter">source</span><span class="token operator">=</span><span class="token string">"tok_visa"</span><span class="token punctuation">,</span>
  on_behalf_of<span class="token operator">=</span><span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span>
<span class="token punctuation">)</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="php">
  <pre class=" numbered language-php"><code class=" language-php"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token namespace">\Stripe</span><span class="token namespace">\Stripe</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">setApiKey</span><span class="token punctuation">(</span><span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$charge</span> <span class="token operator">=</span> <span class="token namespace">\Stripe</span><span class="token namespace">\Charge</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span>
  <span class="token string">"amount"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token string">"currency"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token string">"source"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"tok_visa"</span><span class="token punctuation">,</span>
  <span class="token string">"on_behalf_of"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="java">
  <pre class=" numbered language-java"><code class=" language-java"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">Stripe</span><span class="token punctuation">.</span>apiKey <span class="token operator">=</span> <span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">;</span>

<span class="token constant">Map&lt;String, Object&gt;</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constant">HashMap&lt;String, Object&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"amount"</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"currency"</span><span class="token punctuation">,</span> <span class="token string">"usd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"source"</span><span class="token punctuation">,</span> <span class="token string">"tok_visa"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"on_behalf_of"</span><span class="token punctuation">,</span> <span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="node">
  <pre class=" numbered language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token keyword">var</span> stripe <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"stripe"</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

stripe<span class="token punctuation">.</span><span class="token property">charges</span><span class="token punctuation">.</span><span class="token property"></span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token symbol">amount<span class="token punctuation">:</span></span> <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token symbol">currency<span class="token punctuation">:</span></span> <span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token symbol">source<span class="token punctuation">:</span></span> <span class="token string">"tok_visa"</span><span class="token punctuation">,</span>
  <span class="token symbol">on_behalf_of<span class="token punctuation">:</span></span> <span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property"></span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>charge<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// asynchronously called</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="go">
  <pre class=" numbered language-go"><code class=" language-go"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
stripe<span class="token punctuation">.</span>Key <span class="token operator">=</span> <span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

params <span class="token operator">:=</span> <span class="token constant">&amp;stripe.ChargeParams</span><span class="token punctuation">{</span>
  <span class="token symbol">Amount:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token symbol">Currency:</span> <span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token symbol">OnBehalfOf:</span> <span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
params<span class="token punctuation">.</span><span class="token function">SetSource</span><span class="token punctuation">(</span><span class="token string">"tok_visa"</span><span class="token punctuation">)</span>

charge<span class="token punctuation">,</span> err <span class="token operator">:=</span> charge<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>

    </div>
  </div>

</section>

<section>
<h2 id="transfer-availability">Transfer availability<a class="anchor" href="https://stripe.com/docs/connect/charges-transfers#transfer-availability"></a></h2>

<p>When creating separate charges and transfers, your platform can inadvertently attempt a transfer without having a sufficient available balance. Doing so raises an error and the transfer attempt fails. If you’re commonly experiencing this problem, you can use the <code>source_transaction</code> parameter to tie a transfer to an existing charge. By using <code>source_transaction</code>, the transfer request succeeds regardless of your available balance and the transfer itself only occurs once the charge’s funds become available.</p>
  <div class="tabs tabs-code animated" data-platform="server">
    <nav class="nav-languages">
        <a data-language="curl" class="selected">curl</a>
        <a data-language="ruby">Ruby</a>
        <a data-language="python">Python</a>
        <a data-language="php">PHP</a>
        <a data-language="java">Java</a>
        <a data-language="node">Node</a>
        <a data-language="go">Go</a>
    </nav>
    <div class="tabs-content">
      <div class="code selected" data-language="curl">
  <pre class=" numbered selected language-curl"><code class=" language-curl"><span class="token curl">curl</span> <span class="token url">https://api.stripe.com/v1/transfers</span> \
<span class="token option">   -u</span> <span class="token value secret-key" style="pointer-events: none;">sk_test_BQokikJOvBiI2HlWgH4olfQ2</span>: \
<span class="token option">   -d</span> <span class="token parameter">amount</span>=<span class="token value">1000</span> \
<span class="token option">   -d</span> <span class="token parameter">currency</span>=<span class="token value">usd</span> \
<span class="token option">   -d</span> <span class="token parameter">source_transaction</span>=<span class="token value"></span><span class="token value">"{CHARGE_ID}"</span> \
<span class="token option">   -d</span> <span class="token parameter">destination</span>=<span class="token value"></span><span class="token value">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="ruby">
  <pre class=" numbered language-ruby"><code class=" language-ruby"><span class="token comment" spellcheck="true"># Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true"># See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">Stripe</span><span class="token punctuation">.</span><span class="token function">api_key</span> <span class="token operator">=</span> <span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

transfer <span class="token operator">=</span> <span class="token constant">Stripe</span><span class="token punctuation">:</span><span class="token symbol">:Transfer</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token symbol">:amount</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">900</span><span class="token punctuation">,</span>
  <span class="token symbol">:currency</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token symbol">:source_transaction</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{CHARGE_ID}"</span><span class="token punctuation">,</span>
  <span class="token symbol">:destination</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="python">
  <pre class=" numbered language-python"><code class=" language-python"><span class="token comment" spellcheck="true"># Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true"># See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">stripe.api_key</span> <span class="token operator">=</span> <span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

transfer <span class="token operator">=</span> <span class="token constant">stripe.Transfer.</span><span class="token function">create</span><span class="token punctuation">(</span>
  <span class="token parameter">amount</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token parameter">currency</span><span class="token operator">=</span><span class="token string">"usd"</span><span class="token punctuation">,</span>
  source_transaction<span class="token operator">=</span><span class="token string">"{CHARGE_ID}"</span><span class="token punctuation">,</span>
  <span class="token parameter">destination</span><span class="token operator">=</span><span class="token punctuation">{</span>CONNECTED_STRIPE_ACCOUNT_ID<span class="token punctuation">}</span>"<span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="php">
  <pre class=" numbered language-php"><code class=" language-php"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token namespace">\Stripe</span><span class="token namespace">\Stripe</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">setApiKey</span><span class="token punctuation">(</span><span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$transfer</span> <span class="token operator">=</span> <span class="token namespace">\Stripe</span><span class="token namespace">\Transfer</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span>
  <span class="token string">"amount"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token string">"currency"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token string">"source_transaction"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{CHARGE_ID}"</span><span class="token punctuation">,</span>
  <span class="token string">"destination"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="java">
  <pre class=" numbered language-java"><code class=" language-java"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">Stripe</span><span class="token punctuation">.</span>apiKey <span class="token operator">=</span> <span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">;</span>

<span class="token constant">Map&lt;String, Object&gt;</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constant">HashMap&lt;String, Object&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"amount"</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"currency"</span><span class="token punctuation">,</span> <span class="token string">"usd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"source_transaction"</span><span class="token punctuation">,</span> <span class="token string">"{CHARGE_ID}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"destination"</span><span class="token punctuation">,</span> <span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">Transfer</span> transfer <span class="token operator">=</span> <span class="token constant">Transfer</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="node">
  <pre class=" numbered language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token keyword">var</span> stripe <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"stripe"</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

stripe<span class="token punctuation">.</span><span class="token property">transfers</span><span class="token punctuation">.</span><span class="token property"></span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token symbol">amount<span class="token punctuation">:</span></span> <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token symbol">currency<span class="token punctuation">:</span></span> <span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token symbol">source_transaction<span class="token punctuation">:</span></span> <span class="token string">"{CHARGE_ID}"</span><span class="token punctuation">,</span>
  <span class="token symbol">destination<span class="token punctuation">:</span></span> <span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property"></span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>transfer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// asynchronously called</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="go">
  <pre class=" numbered language-go"><code class=" language-go"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
stripe<span class="token punctuation">.</span>Key <span class="token operator">=</span> <span class="token string secret-key" style="pointer-events: none;">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

params <span class="token operator">:=</span> <span class="token constant">&amp;stripe.TransferParams</span><span class="token punctuation">{</span>
  <span class="token symbol">Amount:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token symbol">Currency:</span> <span class="token string">"usd"</span><span class="token punctuation">,</span>
  <span class="token symbol">SourceTx:</span> <span class="token string">"{CHARGE_ID}"</span><span class="token punctuation">,</span>
  <span class="token symbol">Dest:</span> <span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
transfer<span class="token punctuation">,</span> err <span class="token operator">:=</span> transfer<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>

    </div>
  </div>

<p>When using this parameter:</p>

<ul>
  <li>The amount of the transfer must not exceed the amount of the source
charge</li>
  <li>You may create multiple transfers with the same <code>source_transaction</code>, as long as the sum of the transfers doesn’t exceed the source charge</li>
  <li>The transfer takes on the pending status of the associated charge: if the funds from the charge become available in N days, the payment that the
destination Stripe account receives from the transfer also becomes available in N days</li>
  <li>Stripe automatically creates a <code>transfer_group</code> for you</li>
</ul></section>

<section>
  <h2 id="further-reading">Further reading<a class="anchor" href="https://stripe.com/docs/connect/charges-transfers#further-reading"></a></h2>
  <p>Discover what other Connect functionality is available.</p>
<ul class="next-steps">
    <li><a href="https://stripe.com/docs/connect/charges"><span>Creating Charges</span></a></li>
    <li><a href="https://stripe.com/docs/connect/currencies"><span>Multiple Currencies</span></a></li>
    <li><a href="https://stripe.com/docs/connect/custom-accounts"><span>Custom accounts</span></a></li>
    <li><a href="https://stripe.com/docs/connect/shared-customers"><span>Shared Customers</span></a></li>
    <li><a href="https://stripe.com/docs/connect/statement-descriptors"><span>Statement Descriptors with Connect</span></a></li>
    <li><a href="https://stripe.com/docs/connect/account-balances"><span>Understanding Connect Account Balances</span></a></li>
</ul>

</section>
<footer>
  <h2 data-no-anchor="">Questions?</h2>
  <p>We're always happy to help with code or other questions you might have! <a href="https://stripe.com/docs/connect/charges-transfers#" class="search-link">Search</a> our documentation, <a href="https://support.stripe.com/email">contact support</a>, or <a href="https://stripe.com/contact/sales">connect with our sales team</a>. You can also chat live with other developers in <a href="irc://irc.freenode.net/stripe">#stripe</a> on freenode.</p>
</footer>
</article>
      </div>
    </div>

    <div id="loading-bar" class="hidden" style="width: 0%;"></div>

    <script src="./Creating Separate Charges and Transfers_files/jquery.min-356cfe6f83a29dcc6fd2cd9ac777637e.js"></script>
    <script src="./Creating Separate Charges and Transfers_files/prism-d97c2fbc02243c145440b270c43ec26b.js"></script>
    <script src="./Creating Separate Charges and Transfers_files/dynamics.min-f8b2e1648525e57b196b53792a19cda3.js"></script>
    <script src="./Creating Separate Charges and Transfers_files/jquery.cookie-368e8ec1948575a79f6830f8d13db348.js"></script>
    <script src="./Creating Separate Charges and Transfers_files/documentation-9d21cec0f3371635162f9c978350719d.js"></script>
      <script src="./Creating Separate Charges and Transfers_files/algoliasearch-ccb98f296c1e54994357b8d396b3ce13.js"></script>
      <script src="./Creating Separate Charges and Transfers_files/documentation-search-76a887ea03340dcf4d184728b1daad3d.js"></script>
    <script>
      parseKey("sk_test_BQokikJOvBiI2HlWgH4olfQ2", "secret-key", null);
      parseKey("pk_test_6pRNASCoBOKtIshFeQd4XMUh", "publishable-key", null);
    </script>
      <script type="text/javascript" src="./Creating Separate Charges and Transfers_files/saved_resource"></script>
  <script type="text/javascript" src="./Creating Separate Charges and Transfers_files/saved_resource(1)"></script>

    
    

<script type="application/json" id="site-analytics-config">{"generalAnalyticsConfig":{"mixpanel":{"identifier":"eb71b6171a4f7ed97de9b7a0395b7ca5"},"ga":{},"trackpage":true,"flags":{"site.experiments.home_page_cta":true,"site.experiments.nav_login_cta":false,"site.experiments.get_started_copy":false,"site.experiments.request_demo_copy":false,"site.experiments.contact_sales_content":false},"locale":"en"},"siteSpecificAnalyticsConfig":{"trackPageViewed":false}}</script>


<!-- Google Tag Manager (noscript) -->
<noscript>&lt;iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K8JKCBR"
height="0" width="0" style="display:none;visibility:hidden"&gt;&lt;/iframe&gt;</noscript>
<!-- End Google Tag Manager (noscript) -->


<script defer="" src="./Creating Separate Charges and Transfers_files/analytics.min.js"></script>
<script defer="" src="./Creating Separate Charges and Transfers_files/stripe-m-preview.js"></script>
 
    <script src="./Creating Separate Charges and Transfers_files/documentation-analytics-7e4ac19718751588692cdd0955dba883.js"></script>
  

<div id="MultiLookup" style="opacity: 0.8" class="black"></div><div id="dict" class="card-panel grey lighten-4"><div id="dict-inner"></div><img id="toktogi-lock" class="toktogi-icon" src="chrome-extension://domfinmkohodhgghgedfdcmonefafolm/images/unlock.png"></div><div id="toktogi-notification" class="card-panel grey lighten-4">Toktogi is on</div><iframe frameborder="0" allowtransparency="true" scrolling="no" name="__privateStripeMetricsController0" allowpaymentrequest="true" src="./Creating Separate Charges and Transfers_files/outer.html" aria-hidden="true" tabindex="-1" style="border: none !important; margin: 0px !important; padding: 0px !important; width: 1px !important; min-width: 100% !important; overflow: hidden !important; display: block !important; visibility: hidden !important; position: fixed !important; height: 1px !important; pointer-events: none !important;"></iframe></body><div></div></html>