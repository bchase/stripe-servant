<!DOCTYPE html>
<!-- saved from url=(0045)https://stripe.com/docs/connect/subscriptions -->
<html lang="en" data-ember-extension="1"><script type="text/javascript" async="" src="./Creating Subscriptions_files/mixpanel-2.2.min.js"></script><script async="" src="./Creating Subscriptions_files/analytics.js"></script><script async="" src="./Creating Subscriptions_files/gtm.js"></script><script src="./Creating Subscriptions_files/742650679237989" async=""></script><script async="" src="./Creating Subscriptions_files/fbevents.js"></script><script type="text/javascript">window["_gaUserPrefs"] = { ioo : function() { return true; } }</script><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    
    <meta name="google-site-verification" content="f0LCrdI6z4Fo8zld4sHCgo5SiUE4EYYRUa6KVeX3Mw8">
    <meta name="csrf-token" content="ACmByp9VS-5dgI-ZXH4IDjQKupcbFRMLHUfMREA8ebLWGyvN9zdYqelEZg-tdQCE2ww411MvMRPNy_WDfbOyUg==">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Creating Subscriptions</title>

    <meta name="description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">


    <link rel="shortcut icon" href="https://stripe.com/favicon.ico">

    <link rel="apple-touch-icon-precomposed" href="https://stripe.com/img/apple-touch-icon/180x180.png">
    <link rel="icon" href="https://stripe.com/img/apple-touch-icon/180x180.png">


    <link rel="image_src" type="image/png" href="https://stripe.com/img/v3/home/social.png">


        <link rel="canonical" href="https://stripe.com/docs/connect/authentication">

    <meta property="og:title" content="Authentication with Connect">
    <meta property="og:url" content="https://stripe.com/docs/connect/authentication">
    <meta property="og:description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">
    <meta property="og:image" content="https://stripe.com/img/v3/home/social.png">

      <meta name="twitter:card" content="summary">
      <meta name="twitter:image" content="https://stripe.com/img/v3/home/twitter.png">
    <meta name="twitter:site" content="@stripe">
    <meta name="twitter:title" content="Authentication with Connect">
    <meta name="twitter:description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">


    <script type="application/json" id="strut_files">{&quot;v3/shared/navigation_ie10.css&quot;:&quot;/assets/v3/shared/navigation_ie10-fad8432db8a0ef02ccfc88df4a0b8535.css&quot;}</script>

    

    

    <link rel="stylesheet" href="./Creating Subscriptions_files/default-6388c486f7388db1252f0d7c85db5e15.css">
    <link rel="stylesheet" href="./Creating Subscriptions_files/common-966a7c7414d89c40541b15f2adfa6a26.css">
    <link rel="stylesheet" href="./Creating Subscriptions_files/base-3cdaeb306a5f322afd95a5e0122a3388.css">
    <link rel="stylesheet" href="./Creating Subscriptions_files/prism_light-6e629a34ce1570d4f33f7e2ee8bebbc2.css">
    
    
    <meta name="viewport" content="width=1060">
    <meta name="robots" content="noarchive">
  </head>
  <body class="">
    
    <div id="docs">
      <div id="sidebar" class="bordered">
        <div class="logo">
          <a class="site" href="https://stripe.com/" title="Stripe"></a>
          <a class="extension" href="https://stripe.com/docs">docs</a>
        </div>
        <div class="nav-border"></div>
        <nav>
          <h1 class="home"><a href="https://stripe.com/docs">Home</a></h1>
          <h1 class="payments"><a class="toggle-content" data-trigger-id="0">Payments</a></h1>
<ul class="hidden" data-hidden="true" data-height="889" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/quickstart">Quickstart</a>
    </li>
    <li class="category">Collecting payment details
    </li>
    <li>
      <a href="https://stripe.com/docs/checkout/tutorial" data-trigger-id="9">Checkout</a>
      <ul class="hidden" data-hidden="true" data-height="28" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/checkout">Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/stripe-js" data-trigger-id="10">Stripe.js &amp; Elements</a>
      <ul class="hidden" data-hidden="true" data-height="112" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/stripe-js/elements/quickstart">Quickstart</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/stripe-js/elements/payment-request-button">Payment Request Button</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/stripe-js/elements/migrating">Migration</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/stripe-js/reference">Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/mobile/ios" data-trigger-id="11">iOS</a>
      <ul class="hidden" data-hidden="true" data-height="112" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/mobile/ios/standard">Standard Integration</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/mobile/ios/custom">Custom Integration</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/apple-pay/apps">Apple Pay in Apps</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/mobile/ios/sources">Using Sources</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/mobile/android" data-trigger-id="12">Android</a>
      <ul class="hidden" data-hidden="true" data-height="168" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/mobile/android/standard">Standard Integration</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/mobile/android/pay-with-google">Pay with Google</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/mobile/android/alipay-android">Working with Alipay</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/mobile/android/android-pay">Android Pay</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/mobile/android/customer-information">Customer Information</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/mobile/android/sources">Using Sources</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/saving-cards">Saving Cards</a>
    </li>
    <li class="category">Charges
    </li>
    <li>
      <a href="https://stripe.com/docs/charges">Creating Charges</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/declines" data-trigger-id="13">Declines &amp; Failed Payments</a>
      <ul class="hidden" data-hidden="true" data-height="28" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/declines/codes">Decline Codes</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/disputes" data-trigger-id="14">Disputes &amp; Fraud</a>
      <ul class="hidden" data-hidden="true" data-height="56" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/disputes/categories">Dispute Categories</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/disputes/prevention">Prevention</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/refunds">Refunds</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/payouts">Receiving Payouts</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/currencies" data-trigger-id="15">Supported Currencies</a>
      <ul class="hidden" data-hidden="true" data-height="28" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/currencies/conversions">Currency Conversions</a>
    </li>
</ul>

    </li>
    <li class="category">Sources
    </li>
    <li>
      <a href="https://stripe.com/docs/sources" data-trigger-id="16">Payment Methods</a>
      <ul class="hidden" data-hidden="true" data-height="308" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/sources/cards">Cards</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/three-d-secure">3D Secure</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/alipay">Alipay</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/ach-credit-transfer">ACH Credit Transfer</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/bancontact">Bancontact</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/bitcoin">Bitcoin</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/giropay">Giropay</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/ideal">iDEAL</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/p24">P24</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/sepa-debit">SEPA Direct Debit</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/sofort">SOFORT</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/sources/best-practices">Best Practices</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/customers">Sources &amp; Customers</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sources/connect">Connect Platforms</a>
    </li>
    <li class="category">Other Payment Methods
    </li>
    <li>
      <a href="https://stripe.com/docs/ach">ACH</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/amex-express-checkout">Amex Express Checkout</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/apple-pay">Apple Pay</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/pay-with-google">Pay with Google</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/payment-request-api">Payment Request API</a>
    </li>
    <li class="category">Products &amp; Orders
    </li>
    <li>
      <a href="https://stripe.com/docs/orders" data-trigger-id="17">Orders</a>
      <ul class="hidden" data-hidden="true" data-height="28" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/orders/guide">Guide</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/orders/tax-integration">Tax Integrations</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/orders/shipping-integration">Shipping Integrations</a>
    </li>
    <li class="separator">
      <a href="https://stripe.com/docs/testing">Testing</a>
    </li>
</ul>

          <h1 class="subscriptions"><a class="toggle-content" data-trigger-id="1">Subscriptions</a></h1>
<ul class="hidden" data-hidden="true" data-height="528" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/subscriptions/quickstart">Quickstart</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/creating" data-trigger-id="18">Creating Subscriptions</a>
      <ul data-collapsable="false" data-height="168">
    <li>
      <a href="https://stripe.com/docs/subscriptions/multiplan">Using Multiple Plans</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/discounts">Applying Discounts</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/trials">Using Trial Periods</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/quantities">Setting Quantities</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/taxes">Adding Taxes</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/multiple">Multiple Subscriptions</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/lifecycle">Lifecycle &amp; Events</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/webhooks">Using Webhooks</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/changing" data-trigger-id="19">Changing Subscriptions</a>
      <ul data-collapsable="false" data-height="84">
    <li>
      <a href="https://stripe.com/docs/subscriptions/upgrading-downgrading">Upgrading &amp; Downgrading</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/billing-cycle">Billing Cycle</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/canceling-pausing">Canceling &amp; Pausing</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/invoices" data-trigger-id="20">Working with Invoices</a>
      <ul data-collapsable="false" data-height="28">
    <li>
      <a href="https://stripe.com/docs/subscriptions/ach-credit">ACH Credit Transfers</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/subscriptions/plans">Managing Plans</a>
    </li>
    <li class="separator">
      <a href="https://stripe.com/docs/subscriptions/testing">Testing</a>
    </li>
</ul>

          <h1 class="connect"><a class="toggle-content" data-trigger-id="2">Connect</a></h1>
<ul class="" data-height="566" style="opacity: 1; height: 566px;">
    <li>
      <a href="https://stripe.com/docs/connect">Overview</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/quickstart">Quickstart</a>
    </li>
    <li class="category">Account Types
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/accounts">Accounts Overview</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/standard-accounts">Standard</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/express-accounts">Express</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/custom-accounts" data-trigger-id="21">Custom</a>
      <ul class="hidden" data-hidden="true" data-height="84" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/connect/updating-accounts">Updating Accounts</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/identity-verification">Identity Verification</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/required-verification-information">Required Info</a>
    </li>
</ul>

    </li>
    <li class="category">Processing Payments
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/charges" data-trigger-id="22">Creating Charges</a>
      <ul class="hidden" data-hidden="true" data-height="104" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/connect/direct-charges">Direct Charges</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/destination-charges">Destination Charges</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/charges-transfers">Separate Charges and Transfers</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/connect/account-debits">Account Debits</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/subscriptions" class="selected">Using Subscriptions</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/currencies">Multiple Currencies</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/account-balances">Account Balances</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/payouts">Bank Payouts</a>
    </li>
    <li class="separator">
      <a href="https://stripe.com/docs/connect/best-practices" class="">Best Practices</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/migrating" class="">Migrating</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/reference" class="">OAuth Reference</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/webhooks" class="">Webhooks</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/connect/testing">Testing</a>
    </li>
</ul>

          <h1 class="sigma"><a class="toggle-content" data-trigger-id="3">Sigma</a></h1>
<ul class="hidden" data-hidden="true" data-height="150" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/sigma">Overview</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sigma/transactions">Transactions</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sigma/subscriptions">Subscriptions</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sigma/connect">Connect</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/sigma/scheduled-queries">Scheduled Queries</a>
    </li>
</ul>

          <h1 class="radar"><a class="toggle-content" data-trigger-id="4">Radar</a></h1>
<ul class="hidden" data-hidden="true" data-height="248" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/radar">Overview</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/radar/risk-evaluation">Risk Evaluation</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/radar/blocklist">Blocklist</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/radar/review" data-trigger-id="23">Review</a>
      <ul data-collapsable="false" data-height="28">
    <li>
      <a href="https://stripe.com/docs/radar/review/auth-and-capture">Uncaptured Payments</a>
    </li>
</ul>

    </li>
    <li>
      <a href="https://stripe.com/docs/radar/rules" data-trigger-id="24">Rules</a>
      <ul data-collapsable="false" data-height="28">
    <li>
      <a href="https://stripe.com/docs/radar/rules/reference">Reference</a>
    </li>
</ul>

    </li>
    <li class="separator">
      <a href="https://stripe.com/docs/radar/testing">Testing</a>
    </li>
</ul>

          <h1 class="relay"><a class="toggle-content" data-trigger-id="5">Relay</a></h1>
<ul class="hidden" data-hidden="true" data-height="94" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/relay">Selling in Other Apps</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/relay/apps-guide" data-trigger-id="25">Accepting Orders in Your App</a>
      <ul data-collapsable="false" data-height="28">
    <li>
      <a href="https://stripe.com/docs/relay/apps-error-guide">Error Handling</a>
    </li>
</ul>

    </li>
</ul>

          <h1 class="account"><a class="toggle-content" data-trigger-id="6">Account</a></h1>
<ul class="hidden" data-hidden="true" data-height="150" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/dashboard">Your Account</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/dashboard/receipts">Email Receipts</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/checklist">Going Live Checklist</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/reporting">Reporting</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/dashboard/search">Search</a>
    </li>
</ul>

          <h1 class="api"><a class="toggle-content" data-trigger-id="7">Development</a></h1>
<ul class="hidden" data-hidden="true" data-height="206" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/libraries">API Libraries</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/upgrades">API Upgrades</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/webhooks">Webhooks</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/building-integrations">Building Integrations</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/building-plugins">Building Plugins &amp; Libraries</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/recipes">Recipes</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/security">Security</a>
    </li>
</ul>

          <h1 class="atlas"><a class="toggle-content" data-trigger-id="8">Atlas</a></h1>
<ul class="hidden" data-hidden="true" data-height="122" style="opacity: 0; height: 0px;">
    <li>
      <a href="https://stripe.com/docs/atlas">Overview</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/atlas/application">Application</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/atlas/account-progress">Account Progress</a>
    </li>
    <li>
      <a href="https://stripe.com/docs/atlas/next">What's Next</a>
    </li>
</ul>

          <h1 class="references"><a href="https://stripe.com/docs/api" class="external" target="_blank">API Reference</a></h1>
        </nav>
      </div>
      <div id="content-wrapper" tabindex="0">
        <div class="overlay"></div>
          <div class="search-results">
            <ul class="results"></ul>
          </div>
          <form class="search">
            <input type="search" placeholder="Search documentation...">
            <div class="search-after">
              <span class="search-text"></span>
              <span class="search-after-text--no-results">— No Results</span>
            </div>
          </form>
        <header id="main-header">
          <nav>
            <ul class="external">
              <li><a href="https://support.stripe.com/">Support</a></li>

              <li class="button">
                <a data-adroll-segment="submit_two" href="https://dashboard.stripe.com/login">Sign in</a>
              </li>
            </ul>
          </nav>
        </header>
        <article id="content"><header>
  <h1>Creating Subscriptions</h1>
  <p>With <a href="https://stripe.com/connect">Connect</a>, you can create subscriptions on behalf of connected accounts, optionally taking application fees in the process.</p>
</header>

<section>
  <aside class="note">
	<h3 id="learn-more-about-connect">Learn more about Connect<a class="anchor" href="https://stripe.com/docs/connect/subscriptions#learn-more-about-connect"></a></h3>
	<p>Don't know much about Connect yet? Check out the <a href="https://stripe.com/docs/connect">overview</a>.</p>
</aside>


<p>Through Connect, you can create <a href="https://stripe.com/docs/subscriptions">subscriptions</a> on connected accounts. You can also take an application fee percentage on those subscription payments.</p>

<p>Using subscriptions with Connect has these restrictions:</p>

<ul>
  <li>Both the customer and the plan must be created on the connected account (not your platform account)</li>
  <li>Subscriptions must be created directly on the connected account (using the <code>destination</code> parameter is not supported)</li>
  <li>Your platform can’t update or cancel a subscription it did not create</li>
  <li>Your platform can’t add an <code>application_fee</code> to an invoice that it didn’t create or that contains invoice items it didn’t create</li>
</ul></section>

<section>
<h2 id="creating-subscriptions">Creating subscriptions<a class="anchor" href="https://stripe.com/docs/connect/subscriptions#creating-subscriptions"></a></h2>

<p>Create a subscription on a connected account by performing a standard <a href="https://stripe.com/docs/api#create_subscription">create subscription</a> call while <a href="https://stripe.com/docs/connect/authentication#authentication-via-the-stripe-account-header">authenticated</a> as the connected account. Again, both the customer and the plan must be defined on the connected account for this to work.</p>
  <div class="tabs tabs-code animated" data-platform="server">
    <nav class="nav-languages">
        <a data-language="curl" class="selected">curl</a>
        <a data-language="ruby">Ruby</a>
        <a data-language="python">Python</a>
        <a data-language="php">PHP</a>
        <a data-language="java">Java</a>
        <a data-language="node">Node</a>
        <a data-language="go">Go</a>
    </nav>
    <div class="tabs-content">
      <div class="code selected" data-language="curl">
  <pre class=" numbered selected language-curl"><code class=" language-curl"><span class="token curl">curl</span> <span class="token url">https://api.stripe.com/v1/subscriptions</span> \
<span class="token option">   -u</span> <span class="token value secret-key">sk_test_BQokikJOvBiI2HlWgH4olfQ2</span>: \
<span class="token option">   -d</span> <span class="token parameter">customer</span>=<span class="token value">cus_4fdAW5ftNQow1a</span> \
<span class="token option">   -d</span> <span class="token parameter">plan</span>=<span class="token value">pro-monthly</span> \
<span class="token option">   -H</span> <span class="token value">"Stripe-Account: {CONNECTED_STRIPE_ACCOUNT_ID}"</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="ruby">
  <pre class=" numbered language-ruby"><code class=" language-ruby"><span class="token comment" spellcheck="true"># Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true"># See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">Stripe</span><span class="token punctuation">.</span><span class="token function">api_key</span> <span class="token operator">=</span> <span class="token string secret-key">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

subscription <span class="token operator">=</span> <span class="token constant">Stripe</span><span class="token punctuation">:</span><span class="token symbol">:Subscription</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token symbol">:customer</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"cus_4fdAW5ftNQow1a"</span><span class="token punctuation">,</span>
  <span class="token symbol">:plan</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"pro-monthly"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token symbol">:stripe_account</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token constant">CONNECTED_STRIPE_ACCOUNT_ID</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="python">
  <pre class=" numbered language-python"><code class=" language-python"><span class="token comment" spellcheck="true"># Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true"># See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">stripe.api_key</span> <span class="token operator">=</span> <span class="token string secret-key">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

subscription <span class="token operator">=</span> <span class="token constant">stripe.Subscription.</span><span class="token function">create</span><span class="token punctuation">(</span>
  <span class="token parameter">customer</span><span class="token operator">=</span><span class="token string">"cus_4fdAW5ftNQow1a"</span><span class="token punctuation">,</span>
  <span class="token parameter">plan</span><span class="token operator">=</span><span class="token string">"pro-monthly"</span><span class="token punctuation">,</span>
  <span class="token constant">stripe_account</span><span class="token operator">=</span><span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="php">
  <pre class=" numbered language-php"><code class=" language-php"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token namespace">\Stripe</span><span class="token namespace">\Stripe</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">setApiKey</span><span class="token punctuation">(</span><span class="token string secret-key">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$subscription</span> <span class="token operator">=</span> <span class="token namespace">\Stripe</span><span class="token namespace">\Subscription</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span>
  <span class="token string">"customer"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"cus_4fdAW5ftNQow1a"</span><span class="token punctuation">,</span>
  <span class="token string">"plan"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"pro-monthly"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string">"stripe_account"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="java">
  <pre class=" numbered language-java"><code class=" language-java"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">Stripe</span><span class="token punctuation">.</span>apiKey <span class="token operator">=</span> <span class="token string secret-key">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">;</span>

<span class="token constant">Map&lt;String, Object&gt;</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constant">HashMap&lt;String, Object&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"customer"</span><span class="token punctuation">,</span> <span class="token string">"cus_4fdAW5ftNQow1a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"plan"</span><span class="token punctuation">,</span> <span class="token string">"pro-monthly"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token constant">RequestOptions</span> requestOptions <span class="token operator">=</span> <span class="token constant">RequestOptions</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setStripeAccount</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token constant">CONNECTED_STRIPE_ACCOUNT_ID</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">Charge</span> charge <span class="token operator">=</span> <span class="token constant">Charge</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> requestOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="node">
  <pre class=" numbered language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token keyword">var</span> stripe <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"stripe"</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string secret-key">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

stripe<span class="token punctuation">.</span><span class="token property">subscriptions</span><span class="token punctuation">.</span><span class="token property"></span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token symbol">customer<span class="token punctuation">:</span></span> <span class="token string">"cus_4fdAW5ftNQow1a"</span><span class="token punctuation">,</span>
  <span class="token symbol">plan<span class="token punctuation">:</span></span> <span class="token string">"pro-monthly"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token symbol">stripe_account<span class="token punctuation">:</span></span> <span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> subscription<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// asynchronously called</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="go">
  <pre class=" numbered language-go"><code class=" language-go"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
stripe<span class="token punctuation">.</span>Key <span class="token operator">=</span> <span class="token string secret-key">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

params <span class="token operator">:=</span> <span class="token constant">&amp;stripe.SubParams</span><span class="token punctuation">{</span>
  <span class="token symbol">Customer:</span> <span class="token string">"cus_4fdAW5ftNQow1a"</span><span class="token punctuation">,</span>
  <span class="token symbol">Plan:</span> <span class="token string">"pro-monthly"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
params<span class="token punctuation">.</span><span class="token function">SetStripeAccount</span><span class="token punctuation">(</span><span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">)</span>
subscription<span class="token punctuation">,</span> err <span class="token operator">:=</span> sub<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span>

</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>

    </div>
  </div>

<p>As with <a href="https://stripe.com/docs/connect/direct-charges">creating direct charges</a> on a connected account, you can create a customer on a connected account using a token created with either the platform’s or the connected account’s publishable key. You can also create a token using <a href="https://stripe.com/docs/connect/shared-customers">shared customers</a>.</p></section>

<section>
<h2 id="collecting-fees-on-subscriptions">Collecting fees on subscriptions<a class="anchor" href="https://stripe.com/docs/connect/subscriptions#collecting-fees-on-subscriptions"></a></h2>

<p>When creating or updating a subscription, you can specify an <code>application_fee_percent</code> parameter as an integer between 1 and 100. Each billing period, Stripe takes that percentage off the final invoice amount—including any bundled invoice items, discounts, or account balance adjustments—as a fee for the platform (before any Stripe fees are charged).</p>
  <div class="tabs tabs-code animated" data-platform="server">
    <nav class="nav-languages">
        <a data-language="curl" class="selected">curl</a>
        <a data-language="ruby">Ruby</a>
        <a data-language="python">Python</a>
        <a data-language="php">PHP</a>
        <a data-language="java">Java</a>
        <a data-language="node">Node</a>
        <a data-language="go">Go</a>
    </nav>
    <div class="tabs-content">
      <div class="code selected" data-language="curl">
  <pre class=" numbered selected language-curl"><code class=" language-curl"><span class="token curl">curl</span> <span class="token url">https://api.stripe.com/v1/subscriptions</span> \
<span class="token option">   -u</span> <span class="token value secret-key">sk_test_BQokikJOvBiI2HlWgH4olfQ2</span>: \
<span class="token option">   -d</span> <span class="token parameter">customer</span>=<span class="token value">cus_4fdAW5ftNQow1a</span> \
<span class="token option">   -d</span> <span class="token parameter">plan</span>=<span class="token value">pro-monthly</span> \
<span class="token option">   -d</span> <span class="token parameter">application_fee_percent</span>=<span class="token value">10</span> \
<span class="token option">   -H</span> <span class="token value">"Stripe-Account: {CONNECTED_STRIPE_ACCOUNT_ID}"</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="ruby">
  <pre class=" numbered language-ruby"><code class=" language-ruby"><span class="token comment" spellcheck="true"># Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true"># See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">Stripe</span><span class="token punctuation">.</span><span class="token function">api_key</span> <span class="token operator">=</span> <span class="token string secret-key">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

subscription <span class="token operator">=</span> <span class="token constant">Stripe</span><span class="token punctuation">:</span><span class="token symbol">:Subscription</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token symbol">:customer</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"cus_4fdAW5ftNQow1a"</span><span class="token punctuation">,</span>
  <span class="token symbol">:plan</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"pro-monthly"</span><span class="token punctuation">,</span>
  <span class="token symbol">:application_fee_percent</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token symbol">:stripe_account</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token constant">CONNECTED_STRIPE_ACCOUNT_ID</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="python">
  <pre class=" numbered language-python"><code class=" language-python"><span class="token comment" spellcheck="true"># Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true"># See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">stripe.api_key</span> <span class="token operator">=</span> <span class="token string secret-key">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

subscription <span class="token operator">=</span> <span class="token constant">stripe.Subscription.</span><span class="token function">create</span><span class="token punctuation">(</span>
  <span class="token parameter">customer</span><span class="token operator">=</span><span class="token string">"cus_4fdAW5ftNQow1a"</span><span class="token punctuation">,</span>
  <span class="token parameter">plan</span><span class="token operator">=</span><span class="token string">"pro-monthly"</span><span class="token punctuation">,</span>
  application_fee_percent<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token constant">stripe_account</span><span class="token operator">=</span><span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="php">
  <pre class=" numbered language-php"><code class=" language-php"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token namespace">\Stripe</span><span class="token namespace">\Stripe</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">setApiKey</span><span class="token punctuation">(</span><span class="token string secret-key">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$subscription</span> <span class="token operator">=</span> <span class="token namespace">\Stripe</span><span class="token namespace">\Subscription</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span>
  <span class="token string">"customer"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"cus_4fdAW5ftNQow1a"</span><span class="token punctuation">,</span>
  <span class="token string">"plan"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"pro-monthly"</span><span class="token punctuation">,</span>
  <span class="token string">"application_fee_percent"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string">"stripe_account"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="java">
  <pre class=" numbered language-java"><code class=" language-java"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">Stripe</span><span class="token punctuation">.</span>apiKey <span class="token operator">=</span> <span class="token string secret-key">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">;</span>

<span class="token constant">Map&lt;String, Object&gt;</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constant">HashMap&lt;String, Object&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"customer"</span><span class="token punctuation">,</span> <span class="token string">"cus_4fdAW5ftNQow1a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"plan"</span><span class="token punctuation">,</span> <span class="token string">"pro-monthly"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"application_fee_percent"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token constant">RequestOptions</span> requestOptions <span class="token operator">=</span> <span class="token constant">RequestOptions</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setStripeAccount</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token constant">CONNECTED_STRIPE_ACCOUNT_ID</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">Charge</span> charge <span class="token operator">=</span> <span class="token constant">Charge</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> requestOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="node">
  <pre class=" numbered language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token keyword">var</span> stripe <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"stripe"</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string secret-key">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

stripe<span class="token punctuation">.</span><span class="token property">subscriptions</span><span class="token punctuation">.</span><span class="token property"></span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token symbol">customer<span class="token punctuation">:</span></span> <span class="token string">"cus_4fdAW5ftNQow1a"</span><span class="token punctuation">,</span>
  <span class="token symbol">plan<span class="token punctuation">:</span></span> <span class="token string">"pro-monthly"</span><span class="token punctuation">,</span>
  <span class="token symbol">application_fee_percent<span class="token punctuation">:</span></span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token symbol">stripe_account<span class="token punctuation">:</span></span> <span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> subscription<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// asynchronously called</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="go">
  <pre class=" numbered language-go"><code class=" language-go"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
stripe<span class="token punctuation">.</span>Key <span class="token operator">=</span> <span class="token string secret-key">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

params <span class="token operator">:=</span> <span class="token constant">&amp;stripe.SubParams</span><span class="token punctuation">{</span>
  <span class="token symbol">Customer:</span> <span class="token string">"cus_4fdAW5ftNQow1a"</span><span class="token punctuation">,</span>
  <span class="token symbol">Plan:</span> <span class="token string">"pro-monthly"</span><span class="token punctuation">,</span>
  <span class="token symbol">FeePercent:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
params<span class="token punctuation">.</span><span class="token function">SetStripeAccount</span><span class="token punctuation">(</span><span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">)</span>
subscription<span class="token punctuation">,</span> err <span class="token operator">:=</span> sub<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span>

</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>

    </div>
  </div>

<p>For example, take this scenario:</p>

<ul>
  <li>The subscription cost per billing cycle is $30</li>
  <li>There’s a $10 invoice item</li>
  <li>A 50% coupon applies</li>
  <li>The <code>application_fee_percent</code> is 10</li>
</ul>

<p>In that case, the total application fee taken is $2.00: ($30 + $10) * 50% * 10%.</p>

<p>Application fees on subscriptions must be a percentage, as the amount billed via subscriptions often varies. You cannot set a flat amount for the application fee on a subscription, but can on an invoice as explained below.</p>

<p>The <code>application_fee_percent</code> does not apply to invoices created outside of a subscription billing period. This includes proration invoice items that are immediately invoiced. In those cases, you should to set an <code>application_fee</code> on the invoice directly for the amount you’d like to charge.</p></section>

<section>
<h2 id="working-with-invoices">Working with invoices<a class="anchor" href="https://stripe.com/docs/connect/subscriptions#working-with-invoices"></a></h2>

<p>To charge a flat or dynamic fee, or any fee that can’t be automatically calculated with <code>application_fee_percent</code>, add an <code>application_fee</code> directly on an invoice:</p>
  <div class="tabs tabs-code animated" data-platform="server">
    <nav class="nav-languages">
        <a data-language="curl" class="selected">curl</a>
        <a data-language="ruby">Ruby</a>
        <a data-language="python">Python</a>
        <a data-language="php">PHP</a>
        <a data-language="java">Java</a>
        <a data-language="node">Node</a>
        <a data-language="go">Go</a>
    </nav>
    <div class="tabs-content">
      <div class="code selected" data-language="curl">
  <pre class=" numbered selected language-curl"><code class=" language-curl"><span class="token curl">curl</span> <span class="token url">https://api.stripe.com/v1/invoices/{INVOICE_ID}</span> \
<span class="token option">   -u</span> <span class="token value">{PLATFORM_SECRET_KEY}</span>: \
<span class="token option">   -d</span> <span class="token parameter">application_fee</span>=<span class="token value">100</span> \
<span class="token option">   -H</span> <span class="token value">"Stripe-Account: {CONNECTED_STRIPE_ACCOUNT_ID}"</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="ruby">
  <pre class=" numbered language-ruby"><code class=" language-ruby"><span class="token comment" spellcheck="true"># Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true"># See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">Stripe</span><span class="token punctuation">.</span><span class="token function">api_key</span> <span class="token operator">=</span> <span class="token string secret-key">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

invoice <span class="token operator">=</span> <span class="token constant">Stripe</span><span class="token punctuation">:</span><span class="token symbol">:Invoice</span><span class="token punctuation">.</span><span class="token function">retrieve</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span><span class="token constant">INVOICE_ID</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token symbol">:stripe_account</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token constant">CONNECTED_STRIPE_ACCOUNT_ID</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
invoice<span class="token punctuation">.</span><span class="token function">application_fee</span> <span class="token operator">=</span> <span class="token number">100</span>
invoice<span class="token punctuation">.</span><span class="token function">save</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="python">
  <pre class=" numbered language-python"><code class=" language-python"><span class="token comment" spellcheck="true"># Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true"># See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">stripe.api_key</span> <span class="token operator">=</span> <span class="token string secret-key">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

invoice <span class="token operator">=</span> <span class="token constant">stripe.Invoice.</span><span class="token function">retrieve</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>INVOICE_ID<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token constant">stripe_account</span><span class="token operator">=</span><span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
invoice<span class="token punctuation">.</span><span class="token variable">application_fee</span> <span class="token operator">=</span> <span class="token number">100</span>
invoice<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="php">
  <pre class=" numbered language-php"><code class=" language-php"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token namespace">\Stripe</span><span class="token namespace">\Stripe</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">setApiKey</span><span class="token punctuation">(</span><span class="token string secret-key">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$invoice</span> <span class="token operator">=</span> StripeInvoice<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">retrieve</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span><span class="token constant">INVOICE_ID</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string">"stripe_account"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$invoice</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">application_fee</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// amount in cents</span>
<span class="token variable">$invoice</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="java">
  <pre class=" numbered language-java"><code class=" language-java"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token constant">Stripe</span><span class="token punctuation">.</span>apiKey <span class="token operator">=</span> <span class="token string secret-key">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">;</span>

<span class="token constant">RequestOptions</span> requestOptions <span class="token operator">=</span> <span class="token constant">RequestOptions</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setStripeAccount</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token constant">CONNECTED_STRIPE_ACCOUNT_ID</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">Invoice</span> invoice <span class="token operator">=</span> <span class="token constant">Invoice</span><span class="token punctuation">.</span><span class="token function">retrieve</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token constant">INVOICE_ID</span><span class="token punctuation">}</span><span class="token punctuation">,</span> requestOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token constant">Map&lt;String, Object&gt;</span> invoiceParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constant">HashMap&lt;String, Object&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
invoiceParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"application_fee"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
invoice<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>invoiceParams<span class="token punctuation">,</span> requestOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="node">
  <pre class=" numbered language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
<span class="token keyword">var</span> stripe <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"stripe"</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string secret-key">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

stripe<span class="token punctuation">.</span><span class="token property">invoices</span><span class="token punctuation">.</span><span class="token property"></span><span class="token function">update</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>INVOICE_ID<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token symbol">application_fee<span class="token punctuation">:</span></span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token symbol">stripe_account<span class="token punctuation">:</span></span> CONNECTED_STRIPE_ACCOUNT_ID<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property"></span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>invoice<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// asynchronously called</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>
<div class="code" data-language="go">
  <pre class=" numbered language-go"><code class=" language-go"><span class="token comment" spellcheck="true">// Set your secret key: remember to change this to your live secret key in production</span>
<span class="token comment" spellcheck="true">// See your keys here: https://dashboard.stripe.com/account/apikeys</span>
stripe<span class="token punctuation">.</span>Key <span class="token operator">=</span> <span class="token string secret-key">"sk_test_BQokikJOvBiI2HlWgH4olfQ2"</span>

params <span class="token operator">:=</span> <span class="token constant">&amp;stripe.InvoiceParams</span><span class="token punctuation">{</span>
  <span class="token symbol">Fee:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
params<span class="token punctuation">.</span><span class="token function">SetStripeAccount</span><span class="token punctuation">(</span><span class="token string">"{CONNECTED_STRIPE_ACCOUNT_ID}"</span><span class="token punctuation">)</span>
invoice<span class="token punctuation">,</span> err <span class="token operator">:=</span> invoice<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span>
</code><span class="line-numbers"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
</div>

    </div>
  </div>

<p>(Usually this is done programmatically upon receiving an <code>invoice.created</code> webhook notification, although you can separately create an invoice for pending invoice items and set an application fee on it.)</p>

<p>The <code>application_fee</code> set directly on an invoice overrides any application fee amount calculated with <code>application_fee_percent</code>, and is capped at the invoice’s final charge amount.</p></section>

<section>
  <h2 id="further-reading">Further reading<a class="anchor" href="https://stripe.com/docs/connect/subscriptions#further-reading"></a></h2>
  <p>Discover what other Connect functionality is available!</p>
<ul class="next-steps">
    <li><a href="https://stripe.com/docs/connect/charges"><span>Creating Charges</span></a></li>
    <li><a href="https://stripe.com/docs/connect/shared-customers"><span>Shared Customers</span></a></li>
    <li><a href="https://stripe.com/docs/connect/currencies"><span>Multiple Currencies</span></a></li>
</ul>

</section>
<footer>
  <h2 data-no-anchor="">Questions?</h2>
  <p>We're always happy to help with code or other questions you might have! <a href="https://stripe.com/docs/connect/subscriptions#" class="search-link">Search</a> our documentation, <a href="https://support.stripe.com/email">contact support</a>, or <a href="https://stripe.com/contact/sales">connect with our sales team</a>. You can also chat live with other developers in <a href="irc://irc.freenode.net/stripe">#stripe</a> on freenode.</p>
</footer>
</article>
      </div>
    </div>

    <div id="loading-bar" class="hidden" style="width: 0%;"></div>

    <script src="./Creating Subscriptions_files/jquery.min-356cfe6f83a29dcc6fd2cd9ac777637e.js"></script>
    <script src="./Creating Subscriptions_files/prism-d97c2fbc02243c145440b270c43ec26b.js"></script>
    <script src="./Creating Subscriptions_files/dynamics.min-f8b2e1648525e57b196b53792a19cda3.js"></script>
    <script src="./Creating Subscriptions_files/jquery.cookie-368e8ec1948575a79f6830f8d13db348.js"></script>
    <script src="./Creating Subscriptions_files/documentation-9d21cec0f3371635162f9c978350719d.js"></script>
      <script src="./Creating Subscriptions_files/algoliasearch-ccb98f296c1e54994357b8d396b3ce13.js"></script>
      <script src="./Creating Subscriptions_files/documentation-search-76a887ea03340dcf4d184728b1daad3d.js"></script>
    <script>
      parseKey("sk_test_BQokikJOvBiI2HlWgH4olfQ2", "secret-key", null);
      parseKey("pk_test_6pRNASCoBOKtIshFeQd4XMUh", "publishable-key", null);
    </script>
      <script type="text/javascript" src="./Creating Subscriptions_files/saved_resource"></script>
  <script type="text/javascript" src="./Creating Subscriptions_files/saved_resource(1)"></script>

    
    

<script type="application/json" id="site-analytics-config">{"generalAnalyticsConfig":{"mixpanel":{"identifier":"eb71b6171a4f7ed97de9b7a0395b7ca5"},"ga":{},"trackpage":true,"flags":{"site.experiments.home_page_cta":true,"site.experiments.nav_login_cta":false,"site.experiments.get_started_copy":false,"site.experiments.request_demo_copy":false,"site.experiments.contact_sales_content":false},"locale":"en"},"siteSpecificAnalyticsConfig":{"trackPageViewed":false}}</script>


<!-- Google Tag Manager (noscript) -->
<noscript>&lt;iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K8JKCBR"
height="0" width="0" style="display:none;visibility:hidden"&gt;&lt;/iframe&gt;</noscript>
<!-- End Google Tag Manager (noscript) -->


<script defer="" src="./Creating Subscriptions_files/analytics.min.js"></script>
<script defer="" src="./Creating Subscriptions_files/stripe-m-preview.js"></script>
 
    <script src="./Creating Subscriptions_files/documentation-analytics-7e4ac19718751588692cdd0955dba883.js"></script>
  

<div id="MultiLookup" style="opacity: 0.8" class="black"></div><div id="dict" class="card-panel grey lighten-4"><div id="dict-inner"></div><img id="toktogi-lock" class="toktogi-icon" src="chrome-extension://domfinmkohodhgghgedfdcmonefafolm/images/unlock.png"></div><div id="toktogi-notification" class="card-panel grey lighten-4">Toktogi is on</div><iframe frameborder="0" allowtransparency="true" scrolling="no" name="__privateStripeMetricsController0" allowpaymentrequest="true" src="./Creating Subscriptions_files/outer.html" aria-hidden="true" tabindex="-1" style="border: none !important; margin: 0px !important; padding: 0px !important; width: 1px !important; min-width: 100% !important; overflow: hidden !important; display: block !important; visibility: hidden !important; position: fixed !important; height: 1px !important; pointer-events: none !important;"></iframe></body><div></div></html>